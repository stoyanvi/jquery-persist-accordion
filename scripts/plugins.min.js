var addHTMLelement;(function(a){a.togglePanels=function(e,l){var d={user:"#user01",titleElement:"h3",panelElement:".panel",userClass:"user",userPanelClass:"user-panel",toggleIconClass:"toggle-icon",toggleIconOpenText:"+",toggleIconCloseText:"-",toggleButtonClass:"toggle-panels-button",toggleButtonOpenText:"Open All Panels",toggleButtonCloseText:"Close All Panels",expandedClass:"expanded",accordionSpeed:200};var b=this;b.settings={};var k=a(e),e=e,g,f,c,j;b.init=function(){b.settings=a.extend({},d,l);f='<span class="'+b.settings.toggleIconClass+'">+</span>';g='<a href="#" class="'+b.settings.toggleButtonClass+'">'+b.settings.toggleButtonOpenText+"</a>";k.before(a(g));k.addClass("processed");c=k.find(b.settings.titleElement);c.not(a(b.settings.user+" "+b.settings.titleElement)).after(a(f));a(b.settings.user).prependTo(k);a(b.settings.user).addClass(b.settings.userClass);a(b.settings.user+" "+b.settings.panelElement).addClass(b.settings.userPanelClass).show();j=k.find(b.settings.panelElement);c.add(a("."+b.settings.toggleIconClass)).click(function(){var m=a(this).parent().children(b.settings.panelElement);i(m)});a("."+b.settings.toggleButtonClass).click(function(m){m.preventDefault();i(j)})};var i=function(m){if(m.is(":hidden")){m.parent().addClass(b.settings.expandedClass);m.slideDown(b.settings.accordionSpeed,function(){a(this).parent().children("."+b.settings.toggleIconClass).addClass(b.settings.expandedClass).html(b.settings.toggleIconCloseText);h()})}else{m.not(a("."+b.settings.userPanelClass)).slideUp(b.settings.accordionSpeed,function(){m.parent().removeClass(b.settings.expandedClass);a(this).parent().children("."+b.settings.toggleIconClass).removeClass(b.settings.expandedClass).html(b.settings.toggleIconOpenText);h()})}};var h=function(){var n=k.find(b.settings.panelElement).length;var m=k.find(b.settings.panelElement+":visible").length;if(m>1&&m<n){a("."+b.settings.toggleButtonClass).removeClass(b.settings.expandedClass).html(b.settings.toggleButtonOpenText)}else{if(m===n){a("."+b.settings.toggleButtonClass).addClass(b.settings.expandedClass).html(b.settings.toggleButtonCloseText)}}};b.init()};a.fn.togglePanels=function(b){return this.each(function(){if(undefined==a(this).data("togglePanels")){var c=new a.togglePanels(this,b);a(this).data("togglePanels",c)}})}})(jQuery);